# This file was automatically generated for projects
# without default 'CMakeLists.txt' file.

set(CONFIG "XYZ_MOTOR_JOYSTICK" CACHE STRING "Board Config")
OPTION(ANALOG_IN_CONTROLLER "ANALOG_IN_CONTROLLER" OFF)
OPTION(ANALOG_JOYSTICK "AnalogJoystick" OFF)
OPTION(ANALOG_OUT_CONTROLLER "ANALOG_OUT_CONTROLLER" OFF)
OPTION(BLUETOOTH "BLUETOOTH" OFF)
OPTION(DAC_CONTROLLER "DAC" OFF)
OPTION(DIGITAL_IN_CONTROLLER "DIGITAL_IN_CONTROLLER" OFF)
OPTION(DIGITAL_OUT_CONTROLLER "DIGITAL_OUT_CONTROLLER" OFF)
OPTION(ENCODER_CONTROLLER "ENCODER_CONTROLLER" OFF)
OPTION(LASER_CONTROLLER "Laser" OFF)
OPTION(LED_CONTROLLER "LED" OFF)
OPTION(PID_CONTROLLER "PID_CONTROLLER" OFF)
OPTION(FOCUS_MOTOR "Motor" OFF)
OPTION(SCANNER_CONTROLLER "SCANNER_CONTROLLER" OFF)
OPTION(WIFI "WIFI" OFF)
OPTION(BTHID "BTHID" OFF)
OPTION(PSXCONTROLLER "psx controller" OFF)
OPTION(HOME_MOTOR "HomeMotor" OFF)
OPTION(USE_TCA9535 "USE_TCA9535" OFF)



file(COPY ${CMAKE_SOURCE_DIR}/main/config/${CONFIG}/PinConfig.h DESTINATION ${CMAKE_SOURCE_DIR}/main/)

set(mainsrc ${CMAKE_SOURCE_DIR}/main/)

#FILE(GLOB_RECURSE app_sources ${CMAKE_SOURCE_DIR}/main/)
set(srcs    ${mainsrc}main.cpp
            ${mainsrc}JsonKeys.h
            ${mainsrc}cJSON/cJSON.h
            ${mainsrc}cJSON/cJSON_Utils.h
            ${mainsrc}src/serial/SerialProcess.cpp
            ${mainsrc}src/State/State.cpp
            ${mainsrc}src/config/ConfigController.cpp
         )

if(ANALOG_IN_CONTROLLER EQUAL 1)
    list(APPEND srcs ${mainsrc}src/analog/AnalogInController.cpp)
endif()
if(ANALOG_JOYSTICK EQUAL 1)
    list(APPEND srcs ${mainsrc}src/analogin/AnalogJoystick.cpp)
endif()
if(BLUETOOTH EQUAL 1)
    list(APPEND srcs src/bt/BtController.cpp)
    if(BTHID)
        list(APPEND srcs src/bt/HidController.cpp)
        list(APPEND srcs src/bt/esp_hid_gap.c)
    endif()
endif()
if(DAC_CONTROLLER EQUAL 1)
    list(APPEND srcs ${mainsrc}src/dac/DacController.cpp)
endif()
if(DIGITAL_IN_CONTROLLER EQUAL 1)
    list(APPEND srcs ${mainsrc}src/digitalin/DigitalInController.cpp)
endif()
if(DIGITAL_OUT_CONTROLLER EQUAL 1)
    list(APPEND srcs ${mainsrc}src/digitalout/DigitalOutController.cpp)
endif()
if(ENCODER_CONTROLLER EQUAL 1)
    list(APPEND srcs ${mainsrc}src/encoder/EncoderController.cpp)
endif()
if(HOME_MOTOR EQUAL 1)
    list(APPEND srcs ${mainsrc}src/home/HomeMotor.cpp)
endif()
if(LASER_CONTROLLER EQUAL 1)
    list(APPEND srcs ${mainsrc}src/laser/LaserController.cpp)
endif()
if(LED_CONTROLLER EQUAL 1)
    list(APPEND srcs ${mainsrc}src/led/LedController.cpp)
endif()
if(FOCUS_MOTOR EQUAL 1)
    list(APPEND srcs ${mainsrc}src/motor/FocusMotor.cpp)
    if(USE_FASTACCEL EQUAL 1)
        list(APPEND srcs ${mainsrc}src/motor/FAccelStep.cpp)
    endif()
    if(USE_ACCELSTEP EQUAL 1)
        list(APPEND srcs ${mainsrc}src/motor/AccelStep.cpp)
    endif()
endif()
if(PID_CONTROLLER EQUAL 1)
    list(APPEND srcs ${mainsrc}src/pid/PidController.cpp)
endif()
if(SCANNER_CONTROLLER EQUAL 1)
    list(APPEND srcs ${mainsrc}src/scanner/ScannerController.cpp)
endif()
if(WIFI EQUAL 1)
    FILE(GLOB_RECURSE wifi ${mainsrc}src/wifi/*.*)
    list(APPEND srcs ${wifi})
endif()
if(USE_TCA9535 EQUAL 1)
    list(APPEND srcs ${mainsrc}src/i2c/tca9535.cpp)
    list(APPEND srcs ${mainsrc}src/i2c/tca_controller.cpp)
endif()

idf_component_register(SRCS ${srcs})

if(WIFI EQUAL 1)
    target_add_binary_data(${COMPONENT_TARGET} "certs/prvtkey.pem" TEXT)
    target_add_binary_data(${COMPONENT_TARGET} "certs/servercert.pem" TEXT)
    target_add_binary_data(${COMPONENT_TARGET} "data/index.html" TEXT)
    target_add_binary_data(${COMPONENT_TARGET} "data/jquery.js" TEXT)
    target_add_binary_data(${COMPONENT_TARGET} "data/ota.html" TEXT)
    target_add_binary_data(${COMPONENT_TARGET} "data/script.js" TEXT)
    target_add_binary_data(${COMPONENT_TARGET} "data/styles.css" TEXT)
endif()
